<h3 style="text-align:center;">请扫描二维码收藏店铺</h3>
<div id="qrcode" style="margin: 0 auto%;margin-top:15px;position:relative;width:180px;height:180px;" data-url="<%= "http://www.trade-v.com/weihuo/shops/#{params[:shop_id]}" %>">
  
  <img src="<%= @shop.logo %>" style="width:40px;height:40px;display:block;position: absolute; top: 50%; left: 50%; margin-left: -20px; margin-top: -20px;">
  
</div>

<script type="text/javascript">
  var url = $('#qrcode').attr('data-url');
  
  var qrcode = new QRCode(document.getElementById("qrcode"), {
    text: url,
    width: 180,
    height: 180,
    colorDark : "#000000",
    colorLight : "#ffffff",
    correctLevel : QRCode.CorrectLevel.H
  });
  
</script>

<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="http://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<style type="text/css">
  #qrcode {
    display: block;
    margin: 0 auto;
  }
</style>