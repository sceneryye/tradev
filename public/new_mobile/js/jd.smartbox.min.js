function $addClass(a,b){$setClass(a,b,"add")}function $addEvent(a,b,c){function d(a,b,c,d){a.__hids=a.__hids||[];var e="h"+window.__Hcounter++;a.__hids.push(e),window.__allHandlers[e]={type:b,handler:c,wrapper:d}}function e(a,b){return function(){return a.apply(b,arguments)}}if(a&&b&&c)if(a instanceof Array)for(var f=0,g=a.length;g>f;f++)$addEvent(a[f],b,c);else if(b instanceof Array)for(var f=0,g=b.length;g>f;f++)$addEvent(a,b[f],c);else if(window.__allHandlers=window.__allHandlers||{},window.__Hcounter=window.__Hcounter||1,window.addEventListener){var h=e(c,a);d(a,b,c,h),a.addEventListener(b,h,!1)}else if(window.attachEvent){var h=e(c,a);d(a,b,c,h),a.attachEvent("on"+b,h)}else a["on"+b]=c}function $addToken(a,b,c){var d=$getToken(c);if(""==a||0!=(a.indexOf("://")<0?location.href:a).indexOf("http"))return a;if(-1!=a.indexOf("#")){var e=a.match(/\?.+\#/);if(e){var f=e[0].split("#"),g=[f[0],"&g_tk=",d,"&g_ty=",b,"#",f[1]].join("");return a.replace(e[0],g)}var f=a.split("#");return[f[0],"?g_tk=",d,"&g_ty=",b,"#",f[1]].join("")}return""==d?a+(-1!=a.indexOf("?")?"&":"?")+"g_ty="+b:a+(-1!=a.indexOf("?")?"&":"?")+"g_tk="+d+"&g_ty="+b}function $delClass(a,b){$setClass(a,b,"remove")}function $delCookie(a,b,c,d){var e=$getCookie(a);if(null!=e){var f=new Date;f.setMinutes(f.getMinutes()-1e3),b=b||"/",document.cookie=a+"=;expires="+f.toGMTString()+(b?";path="+b:"")+(c?";domain="+c:"")+(d?";secure":"")}}function $extend(){var a,b=arguments[0]||{},c=1,d=arguments.length;for("object"!=typeof b&&"function"!=typeof b&&(b={});d>c;c++)if(null!=(a=arguments[c]))for(var e in a){var f=a[e];b!==f&&void 0!==f&&(b[e]=f)}return b}function $getCookie(a){var b=new RegExp("(^| )"+a+"(?:=([^;]*))?(;|$)"),c=document.cookie.match(b);return c?c[2]?unescape(c[2]):"":null}function $getScrollPosition(){var a=document.documentElement,b=document.body,c=a&&a.scrollLeft||b&&b.scrollLeft||window.pageXOffset||0,d=a&&a.scrollTop||b&&b.scrollTop||window.pageYOffset||0;return[c,d]}function $getToken(a){var a=a?a:$getCookie("skey");return a?$time33(a):""}function $hasClass(a,b){if(!a||!b)return null;for(var c=("object"==typeof a?a.className:a).split(" "),d=0,e=c.length;e>d;d++)if(b==c[d])return b;return null}function $id(a){return"string"==typeof a?document.getElementById(a):a}function $inArray(a,b){if(b.indexOf)return b.indexOf(a);for(var c=b.length;c--;)if(b[c]===a)return 1*c;return-1}function $itilReport(a){var b={bid:"1",mid:"01",res:[],onBeforeReport:null,delay:5e3};for(var c in a)b[c]=a[c];b.res.length>0&&(window.reportWebInfo=function(){},window.setTimeout(function(){b.onBeforeReport&&b.onBeforeReport(b);var a=b.bid+b.mid+"-"+b.res.join("|"),c="http://bases.wanggou.com/mcoss/webreport/ReportWebInfo?report="+a+"&t="+new Date/1e3;$loadUrl({url:c})},b.delay))}function $loadCss(a,b){if(a){var c;return(!window._loadCss||window._loadCss.indexOf(a)<0)&&(c=document.createElement("link"),c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",a),c.setAttribute("id","loadCss"+Math.random()),document.getElementsByTagName("head")[0].appendChild(c),window._loadCss?window._loadCss+="|"+a:window._loadCss="|"+a),c&&"function"==typeof b&&(c.onload=b),!0}}function $loadScript(a){$loadScript.counter||($loadScript.counter=1);var b="object"==typeof a,c=b?a.url:arguments[0],d=b?a.id:arguments[1],a=b?a:arguments[2],e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,f=document.createElement("script"),g=new Date,h=g.getTime(),i=!1,j=null,k=a||{},l=k.data||"",m=k.charset||"gb2312",n=k.isToken,o=k.skey,p=k.timeout,q=k.isAutoReport||!1,r=k.reportOptions||{},s=k.reportType||"current",t=k.reportRetCodeName,u="undefined"==typeof k.reportSuccessCode?200:k.reportSuccessCode,v="undefined"==typeof k.reportErrorCode?500:k.reportErrorCode,w="undefined"==typeof k.reportTimeoutCode?600:k.reportTimeoutCode,x=k.onload,y=k.onsucc,z=k.callbackName||"",A=k.callback,B=k.errorback,C="uninitialized",D=function(a){if(f&&!i){if(i=!0,j&&(clearTimeout(j),j=null),f.onload=f.onreadystatechange=f.onerror=null,e&&f.parentNode&&e.removeChild(f),f=null,z)if(-1==z.indexOf(".")){window[z]=null;try{delete window[z]}catch(b){}}else for(var c=z.split("."),d={},g=0,h=c.length;h>g;g++){var k=c[g];if(0==g)d=window[k];else if(g==h-1)try{delete d[k]}catch(b){}else d=d[k]}"loaded"!=C&&"function"==typeof B&&B(a),q&&"cross"!=s&&F.report("loaded"==C,a)}},E=function(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")};if(q&&r)if("cross"==s)$returnCode(r).reg();else{r.url=r.url||c.substr(0,-1==c.indexOf("?")?c.length:c.indexOf("?"));var F=$returnCode(r)}if(l&&(c+=(-1!=c.indexOf("?")?"&":"?")+("string"==typeof l?l:E(l))),z&&"function"==typeof A){var G=z;if(-1==z.indexOf("."))z=window[z]?z+$loadScript.counter++:z,window[z]=function(a){C="loaded",q&&t&&(u=a[t]),A.apply(null,arguments),y&&y()};else{for(var H=z.split("."),I={},J=[],K=0,L=H.length;L>K;K++){var M=H[K];0==K?I=window[M]:K==L-1?(I[M]?M+=$loadScript.counter++:"",I[M]=function(a){C="loaded",q&&t&&(u=a[t]),A.apply(null,arguments),y&&y()}):I=I[M],J.push(M)}z=J.join(".")}c=c.replace("="+G,"="+z)}C="loading",d=d?d+h:h,c=n!==!1?$addToken(c,"ls",o):c,f.charset=m,f.id=d,f.onload=f.onreadystatechange=function(){var a=navigator.userAgent.toLowerCase();(-1!=a.indexOf("opera")||-1==a.indexOf("msie")||/loaded|complete/i.test(this.readyState))&&("function"==typeof x&&x(),D("loaded"==C?u:v))},f.onerror=function(){D(v)},p&&(j=setTimeout(function(){D(w)},parseInt(p,10))),setTimeout(function(){f.src=c;try{e.insertBefore(f,e.lastChild)}catch(a){}},0)}function $loadUrl(a){function b(){c&&(c.onload=c.onreadystatechange=c.onerror=null,c.parentNode&&c.parentNode.removeChild(c),c=null)}a.element=a.element||"script";var c=document.createElement(a.element);c.charset=a.charset||"utf-8",a.onBeforeSend&&a.onBeforeSend(c),c.onload=c.onreadystatechange=function(){(/loaded|complete/i.test(this.readyState)||-1==navigator.userAgent.toLowerCase().indexOf("msie"))&&(a.onLoad&&a.onLoad(),b())},c.onerror=function(){b()},c.src=a.url,document.getElementsByTagName("head")[0].appendChild(c)}function $namespace(name){for(var arr=name.split(","),r=0,len=arr.length;len>r;r++)for(var i=0,k,name=arr[r].split("."),parent={};k=name[i];i++)0===i?eval("(typeof "+k+')==="undefined"?('+k+'={}):"";parent='+k):parent=parent[k]=parent[k]||{}}function $report(a){$loadUrl({url:a+(-1==a.indexOf("?")?"?":"&")+Math.random(),element:"img"})}function $returnCode(a){function b(){if(this.sTime=new Date,this.action){var a=$getCookie("retcode"),b=[];a=a?a.split("|"):[];for(var c=0;c<a.length;c++)a[c].split(",")[0]!=this.action&&b.push(a[c]);b.push(this.action+","+this.sTime.getTime()),$setCookie("retcode",b.join("|"),60,"/",this.domain)}}function c(a,b){if(1!=this.isReport){if(this.isReport=!0,this.eTime=new Date,this.retCode=a?1:2,this.errCode=isNaN(parseInt(b))?"0":parseInt(b),this.action){this.url="http://retcode.paipai.com/"+this.action;var c=$getCookie("retcode"),a="",d=[];c=c?c.split("|"):[];for(var e=0;e<c.length;e++)c[e].split(",")[0]==this.action?a=c[e].split(","):d.push(c[e]);if($setCookie("retcode",d.join("|"),60,"/",this.domain),!a)return;this.sTime=new Date(parseInt(a[1]))}if(this.url){var f=this.url.replace(/^.*\/\//,"").replace(/\/.*/,""),g=this.eTime-this.sTime,h=encodeURIComponent(this.formatUrl?this.url.match(/^[\w|/|.|:|-]*/)[0]:this.url);this.reportUrl="http://c.isdspeed.qq.com/code.cgi?domain="+f+"&cgi="+h+"&type="+this.retCode+"&code="+this.errCode+"&time="+g+"&rate="+this.frequence+(this.uin?"&uin="+this.uin:""),this.reportUrl&&Math.random()<1/this.frequence&&this.url&&$report(this.reportUrl)}}}var d={url:"",action:"",sTime:"",eTime:"",retCode:"",errCode:"",frequence:1,refer:"",uin:"",domain:"paipai.com",from:1,report:c,isReport:!1,timeout:3e3,timeoutCode:444,formatUrl:!0,reg:b};try{d.refer=location.href}catch(e){}for(var f in a)d[f]=a[f];return d.url&&(d.sTime=new Date),d.timeout&&setTimeout(function(){d.isReport||d.report(!1,d.timeoutCode)},d.timeout),d}function $setClass(a,b,c){if(a){var d=function(a,b,c){if(a){var d=a.className,e=d?d.split(" "):[];if("add"==c)$hasClass(d,b)||(e.push(b),a.className=e.join(" "));else if("remove"==c){for(var f=[],g=0,h=e.length;h>g;g++)b!=e[g]&&" "!=e[g]&&f.push(e[g]);a.className=f.join(" ")}}};if("string"==typeof a)for(var e=a.split(","),f=0,g=e.length;g>f;f++)e[f]&&d($id(e[f]),b,c);else if(a instanceof Array)for(var f=0,g=a.length;g>f;f++)a[f]&&d(a[f],b,c);else d(a,b,c)}}function $setCookie(a,b,c,d,e,f){var g=new Date,c=arguments[2]||null,d=arguments[3]||"/",e=arguments[4]||null,f=arguments[5]||!1;c?g.setMinutes(g.getMinutes()+parseInt(c)):"",document.cookie=a+"="+escape(b)+(c?";expires="+g.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(f?";secure":"")}function $strTrim(a,b){var c=b||"\\s",d=new RegExp("(^"+c+"*)|("+c+"*$)","g");return a.replace(d,"")}function $time33(a){for(var b=0,c=a.length,d=5381;c>b;++b)d+=(d<<5)+a.charAt(b).charCodeAt();return 2147483647&d}function $htmlEncode(a){return"string"!=typeof a?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;").replace(/ /g,"&nbsp;")}function addUrlParam(a,b,c){var d=~a.indexOf("?")?"&":"?",e=a.indexOf(d+b+"=");if(e>=0){var f=new RegExp("(\\"+d+b+"=[^&#]*)","i");a=a.replace(f,d+b+"="+c)}else{var g=a.indexOf("#");if(g>-1){var h=a.split("#"),i=h[0],j=h[1];a=i+d+b+"="+c+"#"+j}else a+=d+b+"="+c}return a}function trace(a){window.ECC_cloud_report_pv&&window.ja&&window.ja.trace(a)}function isMQQUserAgent(){return/qq\/([\d\.]+)*/i.test(navigator.userAgent)?!0:!1}$namespace("jd.smartbox"),jd.smartbox={oldKey:"",hotwords:null,isFucus:!1,curTab:1,onShow:!1,cgi:"http://dd.search.jd.com/?key={#key#}&callback=ddSearchCb",cgiMonitor:{smartboxTimer:null,timeout:5e3},drakInfo:{onact:!1,text:"",desc:"",link:""},opt:{deley:500,empMode:1,scene:1,showShop:!0,shopKwFix:"（店铺）",css:"http://wq.360buyimg.com/fd/base/css/search/search_panel.s.min.css?t=201505071541",kwObj:"keyWord",searchBtn:"searchBtn",clearBtn:"searchClearBtn",cancelBtn:"cancelBtn",smartboxBlock:"smartboxBlock",searchUrl:"http://wqs.jd.com/search/index.shtml?key={#key#}&sf={#sf#}&as={#as#}",shopSearchUrl:"http://wqs.jd.com/search/shop_index.shtml?key={#key#}&sf={#sf#}&as={#as#}",placeholder:"搜索京东全部商品/店铺",noDark:!1,rdprex:"7095",showCb:null,hideCb:null,keyInput:null,searchRd:"",hotRd:"",wxHotUrl:"http://wq.360buyimg.com/data/coss/keyword/project/mpj118.jsonp",qqHotUrl:"http://wq.360buyimg.com/data/coss/keyword/project/mpj120.jsonp",wxAdid:"2569",qqAdid:"2601",darkRd:"38013.1.1"}},jd.smartbox.init=function(a){this.initParam(a),this.initTpl(),this.bindEvent(),this.initDark(),this.reportEccClick(),this.reportJdClick()},jd.smartbox.grayStrategy=function(){var a=50,b=$getCookie("buy_uin"),c=$getCookie("visitkey"),d=(c||"0").substr(-2),e=parseInt(d,10),f="26495018|214505046|584808398|31803031|497269887|373851963|53564142|1042842105|50259086|442911914|42434741|3715423|942000114|15608209|497195833|357661421|2416755830|795019782|795019783|88392109|198309285|5881223|624974991|378028337|13398605|49078420|472316212|707062524|2648055661|436024304|36384741|66145141|94799098|945548408|795019784|2534815028|540103920|619195553|424296885|26495108|403443703|117372630|3931859193|4084810159|2076343520|2354805240|394243851|121296885|3088468100|281078231|945548408|795019784|455641804|190107267|66145141|3929316205|3960960000|479407736|1919007153|371977119|44316145|51658510|985548779|404645486|252371788|3930422443|29485340|956378949|2831415102";return"undefined"!=typeof window.smartboxGrayStrategy&&(a=window.smartboxGrayStrategy),99==a||a&&e&&a>=e||!0&&b&&f.indexOf(b)>-1},jd.smartbox.initParam=function(a){a&&$extend(this.opt,a),this.opt.kwObj=this.smartQuery("#"+this.opt.kwObj),this.opt.searchBtn=this.smartQuery("#"+this.opt.searchBtn),this.opt.clearBtn=this.smartQuery("#"+this.opt.clearBtn),this.opt.cancelBtn=this.smartQuery("#"+this.opt.cancelBtn),this.opt.smartboxBlock=this.smartQuery("#"+this.opt.smartboxBlock),this.oldKey=$strTrim(this.opt.kwObj.value),this.opt.placeholder&&this.opt.kwObj.setAttribute("placeholder",this.opt.placeholder),this.opt.css&&$loadCss(this.opt.css),this.grayStrategy()&&(this.opt.searchUrl=this.opt.searchUrl.replace(/http\:\/\/wqs\.jd\.com\/search\/index\.shtml/g,"http://wq.jd.com/search/search"))},jd.smartbox.initTpl=function(){this.opt.smartboxBlock.innerHTML=this.child_indextpl(),this.opt.sTab=this.smartQuery('div[dtab="s-tab"]',this.opt.smartboxBlock),this.opt.sRow=this.smartQuery('div[dtab="s-row"]',this.opt.smartboxBlock),this.opt.sBtn=this.smartQuery('div[dtab="s-btn"]',this.opt.smartboxBlock),this.opt.sTag=this.smartQuery('div[dtab="s-tag"]',this.opt.smartboxBlock),this.opt.cBtn=this.smartQuery('div[dtab="c-btn"]',this.opt.smartboxBlock),this.opt.smartWrap=this.smartQuery('div[dtab="smartWrap"]',this.opt.smartboxBlock)},jd.smartbox.bindEvent=function(){var a=this;a.addEvent(this.opt.kwObj,"focus",function(){a.isFucus=!0,a.loadSuggest();var b=$strTrim(a.opt.kwObj.value);""==b?1===a.opt.empMode&&a.showHisAndHot():a.opt.clearBtn&&a.smartShow(a.opt.clearBtn,""),a.smartShow(a.opt.smartboxBlock,""),a.drakInfo.onact&&a.opt.kwObj.setAttribute("placeholder",a.drakInfo.desc)}),a.addEvent(a.opt.kwObj,"blur",function(){a.isFucus=!1;var b=$strTrim(a.opt.kwObj.value);""!=b&&$addClass(a.opt.kwObj,"hd_search_txt_null")}),a.addEvent(this.opt.kwObj,"touchstart",function(){a.reportEccMul("1-1-2"),a.reportJdMul(a.opt.rdprex+".1."+(a.isFucus?"3":"2"))});for(var b=a.opt.kwObj.parentNode;b&&b!==document.body&&"FORM"!==b.tagName.toUpperCase();)b=b.parentNode;b&&"FORM"===b.tagName.toUpperCase()&&a.addEvent(b,"submit",function(b){b.preventDefault();var c=$strTrim(a.opt.kwObj.value);if(a.reportEccMul("1-1-5",{inputKeyword:encodeURIComponent(c)}),a.reportJdMul(a.opt.rdprex+".1.6"),""!=c){var d=a.genSearchUrl(c,"","",a.opt.searchRd,1);d&&(location.href=d)}else if(a.drakInfo.onact&&a.drakInfo.link){if(window.JD){var e=decodeURIComponent(JD.url.getUrlParam("key",a.drakInfo.link)||"");e&&a.savekwLocalStorge(e)}location.href=a.drakInfo.link}}),a.opt.searchBtn&&a.addEvent(a.opt.searchBtn,"touchstart",function(){var b=$strTrim(a.opt.kwObj.value);if(a.reportEccMul("1-1-4",{inputKeyword:encodeURIComponent(b)}),a.reportJdMul(a.opt.rdprex+".1.5"),""!=b){var c=a.genSearchUrl(b,"","",a.opt.searchRd,1);c&&(location.href=c)}else if(a.drakInfo.onact&&a.drakInfo.link){if(window.JD){var d=decodeURIComponent(JD.url.getUrlParam("key",a.drakInfo.link)||"");d&&a.savekwLocalStorge(d)}location.href=a.drakInfo.link}}),a.opt.clearBtn&&a.addEvent(a.opt.clearBtn,"touchstart",function(b){a.opt.kwObj.value="",a.opt.kwObj.focus(),a.opt.keyInput&&a.opt.keyInput(""),a.reportEccMul("1-1-3"),a.reportJdMul(a.opt.rdprex+".1.4"),b.preventDefault(),1!==a.opt.empMode&&a.hideWrap()}),a.opt.cancelBtn&&a.addEvent(a.opt.cancelBtn,"click",function(){a.hideWrap(),a.reportEccMul("1-15-1"),a.reportJdMul(a.opt.rdprex+".1.1"),a.drakInfo.onact&&a.opt.kwObj.setAttribute("placeholder",a.drakInfo.text)}),a.addEvent(a.opt.smartWrap,"touchstart",function(b){var c=b.target;"span"==c.tagName.toLocaleLowerCase()&&(c=c.parentNode);var d=c.getAttribute("key"),e=c.getAttribute("cid"),f=c.getAttribute("level"),g=c.getAttribute("data-type"),h="";h="shop"==g?a.genShopSearchUrl(d,a.opt.searchRd,1):a.genSearchUrl(d,e,f,a.opt.searchRd,1),h&&($addClass(c,"active"),window.setTimeout(function(){location.href=h},200)),b.preventDefault()}),a.setSuggestTimer(),a.bindHisEvent(),a.addEvent(window,"scroll",function(){document.activeElement&&document.activeElement===a.opt.kwObj&&$getScrollPosition()[1]>0&&a.opt.kwObj.blur()})},jd.smartbox.bindHisEvent=function(){var a=this;a.addEvent(a.opt.sRow,"touchstart",function(b){var c=b.target;if("a"==c.tagName.toLocaleLowerCase()){var d=c.getAttribute("key");if(d){var e=-1!=d.indexOf(a.opt.shopKwFix)?a.genShopSearchUrl(d.replace(a.opt.shopKwFix,""),a.opt.searchRd,0):a.genSearchUrl(d,"","",a.opt.searchRd,0);e&&(location.href=e)}}}),a.addEvent(a.opt.sBtn,"click",function(){a.saveStorage("search_kw_history",[],!0),$delCookie("sk_history","/","jd.com"),a.opt.sRow.innerHTML='<div class="s_empty">暂无搜索历史</div>',a.smartShow(a.opt.sBtn,"none")}),a.addEvent(a.opt.sTag,"touchstart",function(b){var c=b.target;if("a"==c.tagName.toLocaleLowerCase()){var d=c.getAttribute("key"),e=c.getAttribute("tarHref");d&&a.savekwLocalStorge(d),e&&(location.href=e)}}),a.addEvent(a.opt.cBtn,"click",function(){a.showHotList()})},jd.smartbox.setSuggestTimer=function(){var a=jd.smartbox;if(a.isFucus){var b=$strTrim(a.opt.kwObj.value);b!=a.oldKey&&(a.oldKey=b,a.loadSuggest(),a.opt.keyInput&&a.opt.keyInput(b)),""!=b?(a.smartShow(a.opt.clearBtn,""),a.onShow&&a.onShow&&1===a.opt.empMode&&a.hideHisAndHot()):(a.smartShow(a.opt.clearBtn,"none"),a.onShow||(1===a.opt.empMode?a.showHisAndHot():a.hideWrap()),a.drakInfo.onact&&a.opt.kwObj.setAttribute("placeholder",a.drakInfo.desc))}window.setTimeout(arguments.callee,a.opt.deley)},jd.smartbox.loadSuggest=function(){var a=this,b=$strTrim(a.opt.kwObj.value);if(b&&a.isFucus){var c=a.cgi.replace(/{#key#}/,encodeURIComponent(b));a.cgiMonitor.smartboxTimer=window.setTimeout(function(){try{JD.report.umpBiz({bizid:"36",operation:"2",result:"0",source:"0",message:"smartbox api timeout"})}catch(a){}},a.cgiMonitor.timeout),$loadScript({url:c})}},window.ddSearchCb=function(a){var b=jd.smartbox;b.cgiMonitor.smartboxTimer&&window.clearTimeout(b.cgiMonitor.smartboxTimer);var c={bizid:"36",operation:"1",result:"0",source:"0",message:"smartbox api loaded"};a&&0!=a.length||(c={bizid:"36",operation:"3",result:"0",source:"0",message:"smartbox api empty"});try{JD.report.umpBiz(c)}catch(d){}var e=$strTrim(b.opt.kwObj.value);if(e){var f=[],g=!0,h=new RegExp("("+e.replace(/([\+\*\.\?\|\^\(\)\{\}\[\]\/\\])/g,"\\$1")+")","g");if(b.opt.showShop&&f.push(b.child_shoptpl({keyword:$htmlEncode(e),cg:"1-15-3",rd:b.opt.rdprex+".14.1"})),a.length>0)for(var i=0,j=a.length;j>i;++i){var k=a[i];k.cg="1-15-1",k.rd=b.opt.rdprex+".14.3",k.keywordStr=k.keyword.replace(h,'<span class="search_string">$1</span>'),k.level?(g&&(g=!1,f.push(b.child_seltpl(k))),k.cg="1-15-2",k.rd=b.opt.rdprex+".14.2",f.push(b.child_cstpl(k))):f.push(b.child_seltpl(k))}f.length>0&&(b.opt.smartWrap.innerHTML=f.join(""),b.showWrap())}},jd.smartbox.genSearchUrl=function(a,b,c,d,e){a=a.replace(/\s+/g," ");var f=this,g="";if("function"==typeof f.opt.searchUrl)f.opt.searchUrl(a,b,c,d);else{if(g=f.opt.searchUrl.replace(/{#key#}/g,encodeURIComponent(a)).replace(/{#sf#}/g,f.opt.scene).replace(/{#as#}/g,e),b&&c){var h=1==c?"cid1":2==c?"cid2":"catid";g+="&filt_type="+h+",L"+b+"M"+b}d&&(g+="&PTAG="+d)}return f.opt.kwObj.value=a,f.savekwLocalStorge(a),g},jd.smartbox.genShopSearchUrl=function(a,b,c){a=a.replace(/\s+/g," ");var d=this,e="";return/优衣库|UNIQLO/i.test(a)?e="http://ok.jd.com/m/index-115778.htm":"function"==typeof d.opt.shopSearchUrl?d.opt.shopSearchUrl(a,b,c):(e=d.opt.shopSearchUrl.replace(/{#key#}/g,encodeURIComponent(a)).replace(/{#sf#}/g,d.opt.scene).replace(/{#as#}/g,c),b&&(e+="&PTAG="+b)),d.opt.kwObj.value=a,d.savekwLocalStorge(a+d.opt.shopKwFix),e},jd.smartbox.showHisAndHot=function(){var a=this;a.onShow=!0,a.smartShow(a.opt.sRow,""),a.smartShow(a.opt.sBtn,""),a.smartShow(a.opt.sTag,""),a.smartShow(a.opt.cBtn,""),a.smartShow(a.opt.sTab,""),a.smartShow(a.opt.smartWrap,"none"),a.initHistory(),a.loadHotList(),a.opt.showCb&&a.opt.showCb()},jd.smartbox.hideHisAndHot=function(){var a=this;a.onShow=!1,a.smartShow(a.opt.sRow,"none"),a.smartShow(a.opt.sBtn,"none"),a.smartShow(a.opt.sTag,"none"),a.smartShow(a.opt.cBtn,"none"),a.smartShow(a.opt.sTab,"none")},jd.smartbox.initHistory=function(){var a=this,b=a.getStorage("search_kw_history");if(b&&"[]"!==b)b=JSON.parse(b);else{var c=$getCookie("sk_history");b=c?c.split("|"):[]}if(a.smartShow(a.opt.sTab,""),!b||b.length<=0)a.opt.sRow.innerHTML='<div class="s_empty">暂无搜索历史</div>',a.smartShow(a.opt.sBtn,"none");else{for(var d=[],e=b.length,f=e-1;f>=0;--f)d.push(a.child_historytpl({key:$htmlEncode(b[f]),cg:"1-6-"+(e-f+2),rd:a.opt.rdprex+".8."+(e-f+2)}));a.opt.sRow.innerHTML=d.join("")}return b&&b.length>0},jd.smartbox.loadHotList=function(){var a=this;if(null!=a.hotwords)return void a.showHotList();var b=isMQQUserAgent()&&a.opt.qqHotUrl?a.opt.qqHotUrl:a.opt.wxHotUrl,c=b.match(/\/m?([^\/]*)\.js/);c&&c[1]&&(window[c[1]]=function(b){if(0==b.errCode){if(b.keywordAreas&&b.keywordAreas[0]){var c=b.keywordAreas[0];c&&c.level1words&&c.level1words[0]&&(a.hotwords=c.level1words[0].level2words)}a.showHotList()}},$loadScript({url:b,isToken:!1}))},jd.smartbox.showHotList=function(){var a=this;a.hotwords.sort(function(){return parseInt(10*Math.random()-5,10)});for(var b=a.hotwords.slice(0,15),c=[],d=/[?&]key=([^&#]+)/,e=0,f=b.length;f>e;++e){var g=b[e],h=g.url.match(d);if(g.key="",h&&h[1]&&(g.key=decodeURIComponent(h[1]),g.cg="1-7-"+(e+2),g.rd=a.opt.rdprex+".8."+(e+15)),a.opt.hotRd)if(/ptag=/i.test(g.url))g.url=g.url.replace(/ptag=\d+(\.\d+)?(\.\d+)?/i,"PTAG="+a.opt.hotRd);else{var i=g.url.indexOf("?")>-1?"&":"?";g.url+=i+"PTAG="+a.opt.hotRd}c.push(a.child_hottpl(g))}a.opt.sTag.innerHTML=c.join("")},jd.smartbox.showWrap=function(){this.smartShow(this.opt.smartboxBlock,""),this.smartShow(this.opt.smartWrap,""),this.opt.showCb&&this.opt.showCb()},jd.smartbox.hideWrap=function(){this.smartShow(this.opt.smartboxBlock,"none"),this.smartShow(this.opt.smartWrap,"none"),this.opt.keyInput&&this.opt.keyInput(""),this.opt.hideCb&&this.opt.hideCb()},jd.smartbox.savekwLocalStorge=function(a){var b=this,c=b.getStorage("search_kw_history");if(c&&"[]"!==c)c=JSON.parse(c);else{var d=$getCookie("sk_history");c=d?d.split("|"):[]}var e=$inArray(a,c);e>-1&&c.splice(e,1),c.length>=10&&c.shift(),c.push(a),b.saveStorage("search_kw_history",c,!0),$setCookie("sk_history",c.join("|"),525600,"/","jd.com")},jd.smartbox.initDark=function(){if(!this.opt.noDark){var a=this,b=isMQQUserAgent()?this.opt.qqAdid:this.opt.wxAdid;window.darkTextCb=function(b){if(0==b.errCode){var c=b.list,d=c.length;if(d>0){var e=c[0].locations,f=e.length;if(f>0){var g=e[0].plans,h=g.length;if(h>0){g.sort(function(){return parseInt(10*Math.random()-5,10)});var i=g[0];a.drakInfo.onact=!0,a.drakInfo.desc=i.materialname,a.drakInfo.text=i.materialdesc;var j=addUrlParam(i.sUrl,"materialid",i.materialid);j=addUrlParam(j,"PTAG",a.opt.darkRd),a.drakInfo.link=j,a.isFucus?a.opt.kwObj.setAttribute("placeholder",a.drakInfo.desc):a.opt.kwObj.setAttribute("placeholder",a.drakInfo.text)}}}}},$loadScript("http://wq.jd.com/mcoss/focusbi/show?pc=10&callback=darkTextCb&gids="+b)}},jd.smartbox.removeStorage=function(a){window.localStorage.removeItem(a)},jd.smartbox.saveStorage=function(a,b,c){window.localStorage.setItem(a,c?JSON.stringify(b):b)},jd.smartbox.getStorage=function(a){return window.localStorage.getItem(a)},jd.smartbox.smartQuery=function(a,b){return b?b.querySelector(a):document.querySelector(a)},jd.smartbox.smartQueryAll=function(a,b){return b?b.querySelectorAll(a):document.querySelectorAll(a)},jd.smartbox.smartShow=function(a,b){a&&(a.style.display=b)},jd.smartbox.addEvent=function(a,b,c){"undefined"!=typeof $&&$?"touchstart"===b?$(a).on("tap",c):$(a).on(b,c):"touchstart"===b?$addEvent(a,"click",c):$addEvent(a,b,c)},jd.smartbox.reportEccClick=function(){function a(a){var b={locid1:"1",locid2:a[1]||"",locid3:a[2]||""};return $extend(b,d())}function b(b,c){var d=a(b);return d.clickKeyword=encodeURIComponent(c.getAttribute("key")||""),d}function c(b,c){var d=a(b);return d.clickKeyword=encodeURIComponent(c.getAttribute("key")||""),d.navid=c.getAttribute("cid")||"",d}function d(){var a={p:"s.wanggou.com",ssId:e.isWX()?"619":"618",searchSource:e.opt.scene||""};return a}var e=this,f={1:a,6:b,7:b,15:c};this.addEvent(this.opt.smartboxBlock,"touchstart",function(a){var b=a.target,c=b.getAttribute("cg");if(c){var d=c.split("-");if(d[1]&&f[d[1]]){var e=f[d[1]](d,b);try{ECC.cloud.report.trace(e)}catch(a){}}}})},jd.smartbox.reportEccMul=function(a,b){var c=a.split("-"),d=$extend({p:"s.wanggou.com",ssId:this.isWX()?"619":"618",searchSource:this.opt.scene||"",locid1:c[0]||"",locid2:c[1]||"",locid3:c[2]||""},b||{});try{ECC.cloud.report.trace(d)}catch(e){}},jd.smartbox.isWX=function(){var a=$getCookie("cid");return 1==a?!0:/MicroMessenger/i.test(navigator.userAgent)?!0:!1},jd.smartbox.reportJdClick=function(){this.addEvent(this.opt.smartboxBlock,"touchstart",function(a){var b=a.target,c=b.getAttribute("rd");if(c)try{trace({ptag:c})}catch(a){}})},jd.smartbox.reportJdMul=function(a){try{trace({ptag:a})}catch(b){}},jd.smartbox.child_cstpl=function(a){var b='<a href="javascript:" data-type="jump" key="'+a.keyword+'" level="'+a.level+'" cid="'+a.cid+'" style="padding-left:20px;" cg="'+a.cg+'" rd="'+a.rd+'"><span cg="'+a.cg+'" rd="'+a.rd+'" key="'+a.keyword+'" cid="'+a.cid+'">在'+a.cname+"</span>分类中搜索</a>";return b},jd.smartbox.child_seltpl=function(a){var b='<a href="javascript:" data-type="jump" key="'+a.keyword+'" cg="'+a.cg+'" rd="'+a.rd+'">'+a.keywordStr+"</a>";return b},jd.smartbox.child_shoptpl=function(a){var b='<a href="javascript:" data-type="shop" key="'+a.keyword+'" cg="'+a.cg+'" rd="'+a.rd+'"><i class="icon_home"></i>搜索 “<span class="search_string">'+a.keyword+"</span>” 相关的店铺</a>";return b},jd.smartbox.child_historytpl=function(a){var b='<a href="javascript:" class="keyword" key="'+a.key+'" cg="'+a.cg+'" rd="'+a.rd+'">'+a.key+"</a>";return b},jd.smartbox.child_hottpl=function(a){var b='<a href="javascript:" class="keyword" tarHref="'+a.url+'" key="'+a.key+'" cg="'+a.cg+'" rd="'+a.rd+'">'+a.keyword+"</a>";return b},jd.smartbox.child_indextpl=function(){var a='<div class="search_panel_wrapper" dtab="s-tab" style="display:none;"><div class="search_panel_title"><div class="text">最近搜索</div><div class="title_btn" dtab="s-btn" cg="1-6-13" rd="'+this.opt.rdprex+'.8.1">清除</div></div><div class="search_panel_con two_row" dtab="s-row"></div><div class="search_panel_title"><div class="text">热门搜索</div><div class="title_btn" dtab="c-btn" cg="1-7-1" rd="'+this.opt.rdprex+'.8.2">换一批</div></div><div class="search_panel_con" dtab="s-tag"></div></div><div class="s_row" dtab="smartWrap" style="display:none;"> </div>';return a};